<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.allabo.fyl.fyl_server.mapper.UserFinancialsMapper">
    <insert id="insertUserFinancial" parameterType="UserFinancialsDTO">
        INSERT INTO user_financials (
            id,
            monthly_income,
            total_assets,
            total_savings,
            total_investment,
<<<<<<< HEAD
            total_expenses,
            total_loan,
            account_type,
            savings_product_name,
            savings_start_date,
            savings_end_date,
            savings_interest_rate,
            loan_type,
            loan_interest_rate,
            loan_start_date,
            loan_end_date,
            remaining_loan,
            insurance_monthly_payment,
            insurance_product,
            insurance_start_date,
            total_pension
        )
        VALUES (
                   #{id},
                   #{monthlyIncome},
                   #{totalAssets},
                   #{totalSavings},
                   #{totalInvestment},
                   #{totalExpenses},
                   #{totalLoan},
                   #{accountType},
                   #{savingsProductName},
                   #{savingsStartDate},
                   #{savingsEndDate},
                   #{savingsInterestRate},
                   #{loanType},
                   #{loanInterestRate},
                   #{loanStartDate},
                   #{loanEndDate},
                   #{remainingLoan},
                   #{insuranceMonthlyPayment},
                   #{insuranceProduct},
                   #{insuranceStartDate},
                   #{totalPension}
=======
            month_expenses,
            total_loan
        )
        VALUES (
               #{id},
               #{monthlyIncome},
               #{totalAssets},
               #{totalSavings},
               #{totalInvestment},
               #{monthExpenses},
               #{totalLoan}
>>>>>>> 730093b3620129594dab1c0287eac79d0b3da1dc
               )
    </insert>



<<<<<<< HEAD
    <resultMap id="searchIdmap" type="UserFinancialsDTO">
        <id property="id" column="id" />
        <result property="monthlyIncome" column="monthly_income" />
        <result property="totalAssets" column="total_assets" />
        <result property="totalSavings" column="total_savings" />
        <result property="totalInvestment" column="total_investment" />
        <result property="totalExpenses" column="total_expenses" />
        <result property="totalLoan" column="total_loan" />
        <result property="accountType" column="account_type" />
        <result property="savingsProductName" column="savings_product_name" />
        <result property="savingsStartDate" column="savings_start_date" />
        <result property="savingsEndDate" column="savings_end_date" />
        <result property="savingsInterestRate" column="savings_interest_rate" />
        <result property="loanType" column="loan_type" />
        <result property="loanInterestRate" column="loan_interest_rate" />
        <result property="loanStartDate" column="loan_start_date" />
        <result property="loanEndDate" column="loan_end_date" />
        <result property="remainingLoan" column="remaining_loan" />
        <result property="insuranceMonthlyPayment" column="insurance_monthly_payment" />
        <result property="insuranceProduct" column="insurance_product" />
        <result property="insuranceStartDate" column="insurance_start_date" />
        <result property="totalPension" column="total_pension" />
=======
    <resultMap id="searchIdmap"  type="UserFinancialsDTO">
        <id property="id" 		column="id" />
        <result property="monthlyIncome"		column="monthly_income" />
        <result property="totalAssets" 		column="total_assets" />
        <result property="totalSavings"		column="total_savings" />
        <result property="totalInvestment"	column="total_investment" />
        <result property="monthExpenses"	column="month_expenses" />
        <result property="totalLoan"	column="total_loan" />
>>>>>>> 730093b3620129594dab1c0287eac79d0b3da1dc
    </resultMap>


    <select id="findById"
            parameterType="string"
            resultMap="searchIdmap">
        select *
        from
            user_financials
        where id = #{id}
    </select>


    <update id="updateUserFinancial" parameterType="UserFinancialsDTO">
        UPDATE user_financials
        SET
            monthly_income = #{monthlyIncome},
            total_assets = #{totalAssets},
            total_savings = #{totalSavings},
            total_investment = #{totalInvestment},
            month_expenses = #{monthExpenses},
            total_loan = #{totalLoan}
        WHERE
            id = #{id}
    </update>


    <insert id="saveUserFinancialsRatio" parameterType="UserFinancialsRatioDAO">
        INSERT INTO user_financials_ratio (
            id,
            asset_investment_ratio,
            income_investment_ratio,
            income_savings_ratio,
            income_debt_ratio,
            asset_savings_ratio,
            asset_debt_ratio,
            income_expenditure_ratio
        )
        VALUES (
                   #{id},
                   #{assetInvestmentRatio},
                   #{incomeInvestmentRatio},
                   #{incomeSavingsRatio},
                   #{incomeDebtRatio},
                   #{assetSavingsRatio},
                   #{assetDebtRatio},
                   #{incomeExpenditureRatio}
               )
    </insert>

</mapper>


